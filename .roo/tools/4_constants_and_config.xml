<?xml version="1.0" encoding="UTF-8"?>
<custom_rules>
  <rule id="constants-1">
    <title>Feature Flags for Experimental Features</title>
    <description>Use FEATURE_FLAGS from constants.ts to gate experimental or migration features.</description>
    <pattern>
      <code>import { FEATURE_FLAGS } from '../constants';

if (FEATURE_FLAGS.USE_NEW_STAGING) {
  return <StagingWorkbench />;
} else {
  return <StagingArea />;
}</code>
    </pattern>
  </rule>

  <rule id="constants-2">
    <title>Use IIIF_SPEC for Context URIs</title>
    <description>Always use constants from IIIF_SPEC instead of hardcoded IIIF context strings.</description>
    <pattern>
      <bad>"@context": "http://iiif.io/api/presentation/3/context.json"</bad>
      <good>"@context": IIIF_SPEC.PRESENTATION_3.CONTEXT</good>
    </pattern>
    <import>import { IIIF_SPEC } from '../constants';</import>
  </rule>

  <rule id="constants-3">
    <title>Behavior Definitions</title>
    <description>Use BEHAVIOR_DEFINITIONS and BEHAVIOR_OPTIONS for IIIF behavior values.</description>
    <pattern>
      <code>import { BEHAVIOR_DEFINITIONS, BEHAVIOR_OPTIONS } from '../constants';

// Get available behaviors for a resource type
const availableBehaviors = BEHAVIOR_OPTIONS['Manifest'];

// Get display info for a behavior
const behaviorInfo = BEHAVIOR_DEFINITIONS['paged'];
// Returns: { value, label, description, category }</code>
    </pattern>
    <categories>
      <category>layout: multi-part, together</category>
      <category>time: auto-advance, no-auto-advance, repeat, no-repeat</category>
      <category>browsing: unordered, individuals, continuous, paged</category>
      <category>page: facing-pages, non-paged</category>
      <category>navigation: sequence, thumbnail-nav, no-nav, hidden</category>
    </categories>
  </rule>

  <rule id="constants-4">
    <title>Rights Options</title>
    <description>Use RIGHTS_OPTIONS for license/rights dropdowns.</description>
    <pattern>
      <code>import { RIGHTS_OPTIONS } from '../constants';

<select>
  {RIGHTS_OPTIONS.map(option => (
    <option key={option.value} value={option.value}>
      {option.label}
    </option>
  ))}
</select></code>
    </pattern>
  </rule>

  <rule id="constants-5">
    <title>Derivative Presets</title>
    <description>Use DERIVATIVE_PRESETS for image size configurations.</description>
    <pattern>
      <code>import { DERIVATIVE_PRESETS, getDerivativePreset } from '../constants';

const preset = getDerivativePreset('level0-static');
// preset.thumbnailWidth = 150
// preset.sizes = [150, 600, 1200]</code>
    </pattern>
    <presets>
      <preset>wax-compatible - Matches minicomp/wax defaults</preset>
      <preset>level0-static - Default for Field Studio exports</preset>
      <preset>level2-dynamic - Minimal derivatives for Level 2 image server</preset>
      <preset>mobile-optimized - Smaller sizes for mobile</preset>
      <preset>archive-quality - Larger sizes for preservation</preset>
    </presets>
  </rule>

  <rule id="constants-6">
    <title>Metadata Complexity Levels</title>
    <description>Use MetadataComplexity type and helpers for progressive disclosure of fields.</description>
    <pattern>
      <code>import { 
  MetadataComplexity, 
  getVisibleFields, 
  isFieldVisible,
  getFieldsByCategory 
} from '../constants';

const visibleFields = getVisibleFields('standard');
const shouldShow = isFieldVisible('behavior', complexity);</code>
    </pattern>
    <levels>
      <level>simple: label, summary, thumbnail</level>
      <level>standard: + metadata, rights, navDate, provider</level>
      <level>advanced: + behavior, viewingDirection, services, structures</level>
    </levels>
  </rule>

  <rule id="constants-7">
    <title>CSV Column Handling</title>
    <description>Use CSV constants for import/export functionality.</description>
    <pattern>
      <code>import { 
  CSV_SUPPORTED_PROPERTIES,
  CSV_TEMPLATE_COLUMNS,
  CSV_COLUMN_ALIASES 
} from '../constants';</code>
    </pattern>
  </rule>

  <rule id="constants-8">
    <title>Structure Visual Hierarchy</title>
    <description>Use STRUCTURE_VISUAL_HIERARCHY for consistent card sizing and prominence.</description>
    <pattern>
      <code>import { getVisualHierarchy, STRUCTURE_CARD_SIZES } from '../constants';

const config = getVisualHierarchy('Canvas');
// config.prominence = 'secondary'
// config.cardSize = 'medium'
// config.showThumbnail = true</code>
    </pattern>
  </rule>
</custom_rules>
